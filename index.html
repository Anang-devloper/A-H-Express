<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>A & H Express ‚Äî Ekspedisi Nasional</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
body{background:#f4f6f9;color:#222}
header{background:linear-gradient(135deg,#0f172a,#1e293b);color:white;padding:20px;text-align:center}
.container{max-width:850px;margin:40px auto;background:white;padding:30px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.08)}
h2{margin-bottom:20px;text-align:center}
.form-group{margin-bottom:15px}
label{font-weight:600;font-size:14px}
input,select,textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;margin-top:5px}
button{width:100%;padding:12px;border:none;border-radius:8px;background:#16a34a;color:white;font-weight:600;cursor:pointer}
button:hover{background:#15803d}
.section-title{margin-top:25px;font-weight:700;color:#0f172a}
.result{margin-top:20px;background:#f1f5f9;padding:15px;border-radius:8px;font-size:14px}
footer{text-align:center;margin-top:40px;padding:20px;color:#777}
</style>
</head>

<body>

<header>
<h1>A & H Express</h1>
<p>Semua Ekspedisi Indonesia ‚Ä¢ Tracking Real-Time</p>
</header>

<div class="container">

<h2>Form Pengiriman Paket</h2>

<form id="orderForm">

<div class="section-title">üì¶ Data Pengirim (Seller)</div>

<div class="form-group">
<label>Nama Pengirim</label>
<input type="text" id="sellerName" required>
</div>

<div class="form-group">
<label>No HP Pengirim</label>
<input type="tel" id="sellerPhone" required>
</div>

<div class="form-group">
<label>Alamat Pengirim</label>
<textarea id="sellerAddress" rows="2" required></textarea>
</div>

<div class="section-title">üìç Data Penerima</div>

<div class="form-group">
<label>Nama Penerima</label>
<input type="text" id="receiverName" required>
</div>

<div class="form-group">
<label>No HP Penerima</label>
<input type="tel" id="receiverPhone" required>
</div>

<div class="form-group">
<label>Alamat Penerima</label>
<textarea id="receiverAddress" rows="2" required></textarea>
</div>

<div class="section-title">üöö Detail Pengiriman</div>

<div class="form-group">
<label>Pilih Ekspedisi</label>
<select id="courier" required>
<option value="jne">JNE</option>
<option value="jnt">J&T Express</option>
<option value="sicepat">SiCepat</option>
<option value="idexpress">ID Express</option>
<option value="wahana">Wahana</option>
<option value="anteraja">AnterAja</option>
<option value="ninjavan">Ninja Xpress</option>
<option value="pos-indonesia">Pos Indonesia</option>
<option value="tiki">TIKI</option>
<option value="lion-parcel">Lion Parcel</option>
</select>
</div>

<div class="form-group">
<label>Layanan</label>
<select id="service">
<option value="reg">Reguler</option>
<option value="exp">Express</option>
<option value="sameday">Same Day</option>
</select>
</div>

<div class="form-group">
<label>Berat (kg)</label>
<input type="number" id="weight" step="0.1" required>
</div>

<div class="form-group">
<label>Ongkir Otomatis (Rp)</label>
<input type="text" id="shippingCost" readonly>
</div>

<button type="submit">Kirim via WhatsApp</button>

</form>

<hr style="margin:40px 0">

<h2>üîé Lacak Resi</h2>

<div class="form-group">
<label>Pilih Ekspedisi</label>
<select id="trackCourier">
<option value="jne">JNE</option>
<option value="jnt">J&T Express</option>
<option value="sicepat">SiCepat</option>
<option value="idexpress">ID Express</option>
<option value="wahana">Wahana</option>
<option value="anteraja">AnterAja</option>
<option value="ninjavan">Ninja Xpress</option>
<option value="pos-indonesia">Pos Indonesia</option>
<option value="tiki">TIKI</option>
<option value="lion-parcel">Lion Parcel</option>
</select>
</div>

<div class="form-group">
<input type="text" id="trackingNumber" placeholder="Masukkan nomor resi">
</div>

<button onclick="trackResi()">Lacak Sekarang</button>

<div class="result" id="trackingResult" style="display:none"></div>

</div>

<footer>¬© 2026 A & H Express</footer>

<script>

// ======================
// ONGKIR OTOMATIS
// ======================
function hitungOngkir(){
let weight = parseFloat(document.getElementById("weight").value);
let service = document.getElementById("service").value;
if(!weight) return;

let base = 10000;
if(service==="exp") base=15000;
if(service==="sameday") base=25000;

let total = Math.ceil(weight) * base;

document.getElementById("shippingCost").value =
new Intl.NumberFormat("id-ID").format(total);
}
document.getElementById("weight").addEventListener("input",hitungOngkir);
document.getElementById("service").addEventListener("change",hitungOngkir);

// ======================
// KIRIM WHATSAPP
// ======================
document.getElementById("orderForm").addEventListener("submit",function(e){
e.preventDefault();

let message =
`üì¶ *FORM PENGIRIMAN A & H EXPRESS*

üë§ *DATA PENGIRIM*
- Nama: ${sellerName.value}
- HP: ${sellerPhone.value}
- Alamat: ${sellerAddress.value}

üìç *DATA PENERIMA*
- Nama: ${receiverName.value}
- HP: ${receiverPhone.value}
- Alamat: ${receiverAddress.value}

üöö Ekspedisi: ${courier.value.toUpperCase()}
‚ö° Layanan: ${service.value}
üì¶ Berat: ${weight.value} kg
üí∞ Ongkir: Rp ${shippingCost.value}`;

let url = `https://wa.me/6282141285551?text=${encodeURIComponent(message)}`;
window.open(url,"_blank");
});

// ======================
// TRACKING
// ======================
async function trackResi(){
let tn = trackingNumber.value.trim();
let slug = trackCourier.value;
let box = document.getElementById("trackingResult");

if(!tn){
alert("Masukkan nomor resi");
return;
}

box.style.display="block";
box.innerHTML="Menghubungkan ke server...";

try{
let res = await fetch("/api/track",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({trackingNumber:tn,slug:slug})
});

let data = await res.json();

if(!data.ok){
box.innerHTML="Resi tidak ditemukan / API belum aktif.";
return;
}

let html = `<b>Status:</b> ${data.tracking.title || '-'}<br><br>`;

data.tracking.checkpoints.forEach(cp=>{
html += `<b>${cp.time||''}</b><br>${cp.status}<br><i>${cp.location}</i><hr>`;
});

box.innerHTML=html;

}catch(err){
box.innerHTML="Gagal koneksi ke server.";
}
}

</script>

</body>
</html>
